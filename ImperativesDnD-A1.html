<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gap-fill: "Please" Imperatives</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:Segoe UI, system-ui, sans-serif; color:#333; }
body { background:#f8fafc; display:flex; flex-direction:column; padding:10px; gap:10px; min-height:100vh; }

h1,p { text-align:center; }

.main-container { display:flex; max-width:1400px; width:100%; gap:15px; margin:0 auto; flex-grow:1; }

.sentences-container { 
  flex:2; 
  display:flex; 
  flex-direction: column; 
  gap:10px; 
  max-height:500px; 
  overflow-y:scroll; 
  padding-right:5px; 
  -webkit-overflow-scrolling: touch; 
}

.sentence-item { background:#eef6f9; border:2px dashed #94a3b8; border-radius:8px; padding:15px; font-size:1.1rem; }

.gap { display:inline-block; min-width:120px; height:36px; border-bottom:2px solid #538e9b; margin:0 5px; vertical-align:middle; text-align:center; cursor:pointer; }
.gap span { font-style:italic; color:#94a3b8; }

.gap.correct { border-color:#4fa46b; background:#e7f6ec; }
.gap.incorrect { border-color:#c05b6d; background:#fdecee; }

.word-pool { flex:1; background:#f1f5f9; border-radius:8px; padding:15px; display:flex; flex-wrap:wrap; align-content:flex-start; gap:10px; min-width:200px; max-height:80vh; overflow-y:auto; }
.word-option { flex:0 0 auto; height:auto; padding:8px 12px; font-size:1rem; background:#e8f4fd; border:2px solid #538e9b; border-radius:6px; display:flex; align-items:center; justify-content:center; cursor:grab; user-select:none; }

.word-option.dragging { opacity:0.6; transform:scale(0.95); position:fixed; z-index:1000; pointer-events:none; box-shadow:0 5px 15px rgba(0,0,0,0.2); }

.instructions { background:#fff3cd; border-left:4px solid #538e9b; border-radius:6px; padding:10px; margin-bottom:10px; font-size:0.95rem; }

.controls { display:flex; justify-content:center; gap:10px; margin-top:10px; }
button { padding:10px 18px; font-size:1rem; border:none; border-radius:6px; cursor:pointer; transition:background 0.2s; }
#checkBtn { background:#538e9b; color:white; }
#resetBtn { background:#f1f5f9; border:2px solid #cbd5e1; }
#message { text-align:center; font-weight:600; min-height:30px; margin-top:5px; }

@media(max-width:900px) {
  .main-container { flex-direction:column; }
  .word-pool { max-height:200px; }
  .word-option { font-size:0.95rem; padding:6px 10px; }
}
</style>
</head>
<body>

<h1>Gap-fill: "Please" Imperatives</h1>
<p>Drag the correct words into the gaps. Click a word in a gap to return it to the pool.</p>

<div class="instructions">
<strong>Instructions:</strong> Drag words from the right panel to the gaps in sentences.
</div>

<div class="main-container">
  <div class="sentences-container" id="sentences-container"></div>
  <div class="word-pool" id="word-pool"></div>
</div>

<div class="controls">
  <button id="checkBtn">Check Answers</button>
  <button id="resetBtn">Reset All</button>
</div>

<div id="message"></div>

<script>
const sentences = [
  { id:1, text:"The city is dangerous at night. Please [  ] careful.", answer:"be" },
  { id:2, text:"It's cold in here. Please [  ] the window.", answer:"close" },
  { id:3, text:"It isn't a problem. Please [  ] about it.", answer:"don't worry" },
  { id:4, text:"This is an English class. Please [  ] Spanish.", answer:"don't speak" },
  { id:5, text:"Their house is on this street. Please [  ] down.", answer:"slow" },
  { id:6, text:"[  ] on! We're late!", answer:"come" },
  { id:7, text:"This is a bus stop. Please [  ] here.", answer:"don't park" },
  { id:8, text:"[  ] that water - it's dirty.", answer:"don't drink" },
  { id:9, text:"This music is terrible. Please [  ] it off.", answer:"turn" }
];

const words = ["be","close","come","don't drink","don't park","slow","don't speak","turn","don't worry"];

let draggedItem = null;

const sentencesContainer = document.getElementById("sentences-container");
const wordPool = document.getElementById("word-pool");
const message = document.getElementById("message");
const checkBtn = document.getElementById("checkBtn");
const resetBtn = document.getElementById("resetBtn");

// Create sentence elements
function createSentences() {
  sentencesContainer.innerHTML="";
  sentences.forEach(s=>{
    const div=document.createElement("div");
    div.className="sentence-item";
    const parts=s.text.split("[  ]");
    const gap=document.createElement("span");
    gap.className="gap";
    gap.dataset.answer=s.answer;
    gap.innerHTML="<span>[drop]</span>";
    gap.addEventListener("dragover", e=>e.preventDefault());
    gap.addEventListener("drop", e=>{
      if(draggedItem){
        gap.textContent=draggedItem.textContent;
        gap.classList.add("filled");
        draggedItem.remove();
        attachGapClick();
      }
    });
    div.appendChild(document.createTextNode(parts[0]));
    div.appendChild(gap);
    if(parts[1]) div.appendChild(document.createTextNode(parts[1]));
    sentencesContainer.appendChild(div);
  });
  attachGapClick();
}

// Make words draggable
function createWordPool(){
  wordPool.innerHTML="";
  words.forEach(w=>{
    const div=document.createElement("div");
    div.className="word-option";
    div.textContent=w;
    div.draggable=true;
    div.addEventListener("dragstart", e=>draggedItem=div);
    div.addEventListener("dragend", e=>draggedItem=null);
    // mobile
    div.addEventListener("touchstart", e=>{ draggedItem=div; });
    div.addEventListener("touchend", e=>{
      if(draggedItem){
        const el=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY);
        if(el && el.classList.contains("gap")){
          el.textContent=draggedItem.textContent;
          el.classList.add("filled");
          draggedItem.remove();
          attachGapClick();
        }
      }
      draggedItem=null;
    });
    wordPool.appendChild(div);
  });
}

// click to remove word from gap
function attachGapClick(){
  document.querySelectorAll(".gap").forEach(g=>{
    g.addEventListener("click", e=>{
      if(g.classList.contains("filled")){
        const div=document.createElement("div");
        div.className="word-option"; div.textContent=g.textContent;
        div.draggable=true;
        div.addEventListener("dragstart", e=>draggedItem=div);
        div.addEventListener("dragend", e=>draggedItem=null);
        wordPool.appendChild(div);
        g.innerHTML="<span>[drop]</span>";
        g.classList.remove("filled","correct","incorrect");
      }
    });
  });
}

// check answers
checkBtn.addEventListener("click", ()=>{
  document.querySelectorAll(".gap").forEach(g=>{
    g.classList.remove("correct","incorrect");
    if(g.textContent===g.dataset.answer) g.classList.add("correct");
    else if(g.textContent!=="[drop]") g.classList.add("incorrect");
  });
});

// reset
resetBtn.addEventListener("click", ()=>{
  createSentences();
  createWordPool();
  message.textContent="";
});

createSentences();
createWordPool();
</script>
</body>
</html>
